<!DOCTYPE html><html><head><title>Account Verification</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Account Verification"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Account Verification</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Learn to implement account verification in your web app with Twilio-powered Authy. Account verification helps you ensure your customer data is accurate and secure. This tutorial will show you the code to make it happen.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Register a User" class="chapter"><div data-title="Introduction" class="step"><h2 id="user-account-verification">User Account Verification</h2>
<p>Ready to implement user account verification in your application? Here&#39;s how it works at a high level:</p>
<ol>
<li><p>The user begins the registration process by entering their data, including a phone number, into a signup form</p>
</li>
<li><p>The authentication system sends a one-time password to the user&#39;s mobile phone to verify their possession of that phone number</p>
</li>
<li><p>The user enters the one-time password into a form before completing registeration</p>
</li>
<li><p>The user sees a success page and receives an SMS indicating that their account has been created</p>
</li>
</ol>
<h2 id="building-blocks">Building Blocks</h2>
<p>To get this done, you&#39;ll be working with the following Twilio-powered APIs:</p>
<p><strong>Authy REST API</strong></p>
<ul>
<li><a href="https://docs.authy.com/#section-Enabling_two-factor_on_a_user">Users Resource</a>: You will need to create Authy users to send and verify one-time passwords with them.</li>
<li><a href="https://docs.authy.com/#section-Text_Messages">SMS Resource</a>: We will ask Authy to send one-time passwords to our user via SMS</li>
<li><a href="https://docs.authy.com/#section-Verifying_a_token">Verify Resource</a>: Used to verify tokens entered by the user in our web form during registration</li>
</ul>
<p><strong>Twilio REST API</strong></p>
<ul>
<li><a href="/docs/api/rest/sending-sms">Messages Resource</a>: We will use Twilio directly to send our user a confirmation message after they create an account</li>
</ul>
<p>Let&#39;s get started! Click the right arrow to move on to the next step of the tutorial.</p>
</div><div data-title="About This Tutorial" class="step"><h2 id="about-this-tutorial">About This Tutorial</h2>
<p>In this tutorial, we will be working through a series of <a href="http://en.wikipedia.org/wiki/User_story">user stories</a> that describe how to fully implement account verification in a web application. Our team implemented this example application in about 12 story points (roughly equivalent to 12 working hours).</p>
<p>Let&#39;s get started with our first user story around creating a new user account.</p>
</div><div data-title="The User Story" class="step"><h2>The User Story</h2><blockquote>As a user, I want to register for a new user account with my e-mail, full name, mobile phone number, and a password.</blockquote><p>To do account verification, you definitely need to start with an account! This story requires that we create a bit of UI and a model object to create and save a new <code>User</code> in our system. At a high level, here&#39;s what we will need to add:</p>
<ul>
<li>A form to enter details about the new user </li>
<li>A route and controller function on the server to render the form </li>
<li>A route and controller function on the server to handle the form POST request</li>
<li>A persistent <code>User</code> model object to store information about the user </li>
</ul>
<p>Let&#39;s start by looking at the model, where we decide what information we want to store about our user.</p>
</div><div data-title="User Model" data-file="app/models/user.rb" class="step"><h2 id="the-user-model">The User Model</h2>
<p>The User Model for this use-case is pretty straight-forward and Rails offers us some tools to make it even simpler. If you have already read through the <a href="/docs/howto/walkthrough/two-factor-authentication">2FA tutorial</a> this probably looks very similar. Let&#39;s start by defining our model and validating it.</p>
<p>First we need to create the ActiveRecord object, which creates the model in the related Postgres table and tells our app how to validate the model&#39;s data.</p>
<p><em>Data Validation</em></p>
<p>Validations are important since we want to make sure only accurate data is being saved into our datbase. In this case we only want to validate that all of our required fields are present. We can do this by creating a <code>validates</code> statement with <code>presence: true</code>.</p>
<p><em>Passwords</em></p>
<p>In Rails creating a secure password hash is as simple as calling <code>has_secure_password</code>. This created a hash that protects our user&#39;s passwords on the database.</p>
<p>One note: in order to run this demo you would need to run <code>rake db:migrate</code> which would run the migrations in our db/migrate folder. For this tutorial we&#39;re gonna focus on the verification steps but if you want to learn more about migrations you can read the <a href="http://edgeguides.rubyonrails.org/active_record_migrations.html">Rails guide</a> on the subject.</p>
<p>Now we&#39;re ready to move up to the controller level of the application, starting with the HTTP request routes we&#39;ll need.</p>
</div><div data-title="Adding Routes" data-file="config/routes.rb" class="step"><h2 id="adding-new-routes">Adding New Routes</h2>
<p>In a <a href="http://rubyonrails.org/">Rails</a> application, there is something called <a href="http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default">Resource Routing</a> which automatically maps a resources CRUD capabilities to it&#39;s controller. Since our User is an ActiveRecord resource, we can tell Rails that we want to use some of these routes, which will save us some lines of code.</p>
<p>This means that in this one line of code we automatically have a &#39;user/new&#39; route which will automatically render our &#39;user/new.html.erb&#39; file. Let&#39;s take a look at this form up close.</p>
</div><div data-title="New User Form" data-file="app/views/users/new.html.erb" data-language="htmlembedded" class="step"><h2 id="new-user-form">New User Form</h2>
<p>When we create a new user, we ask for a name, e-mail address, and a password. In order to validate their account, we also ask them for a mobile number with a country code, which we can use with Authy to send them one-time passwords via SMS.</p>
<p>By using the rails <code>form_for</code> tag we can bind the form to the model object. This will generate the necessary html markup that will create a new User on submit.</p>
<p>Let&#39;s jump back over to the controller to see what happens when we create a user.</p>
</div><div data-title="Handling the Form POST" data-file="app/controllers/users_controller.rb" data-highlight="10-23" class="step"><h2 id="handling-the-form-post">Handling the Form POST</h2>
<p>One of the other handy controllers created by our <code>User</code> resource route was &#39;user/create&#39; which handles the POST from our form.</p>
<p>In our controller we take the input from our form and create a new <code>User</code> model. If the user is saved to the database successfully, we use the Authy gem to create a corresponding Authy User and save the ID for that user in our database.</p>
<p>Now we have a user that has registered, but is not verified. In order to view anything else on the site they need to verify they own the phone number they submitted by entering a token we send to their phone. Time to take a look at how we would send this token.</p>
</div></div><div data-title="Send a One-Time Code" class="chapter"><div data-title="Sending a One-Time Password" class="step"><h2>User Story: Sending a One-Time Password</h2><blockquote>As an authentication system, I want to send a one-time password to a user's mobile phone to verify their possession of that phone number.</blockquote><p>This story covers a process that is invisible to the end user but necessary to power our account verification functionality. After a new user is created, the application needs to send a one-time password to that user&#39;s phone to validate the number (and the account). Here&#39;s what needs to get done:</p>
<ul>
<li>Create and configure an Authy API client</li>
<li>Modify the controller to send a one-time password after the user is created</li>
</ul>
<p>Let&#39;s begin by modifying the app&#39;s configuration to contain our Authy API key.</p>
</div><div data-title="Configuring Authy" data-file="config/secrets.yml" data-highlight="13-15" class="step"><h2 id="configuring-authy">Configuring Authy</h2>
<p>In <code>secrets.yml</code>, we list configuration parameters for the application. Most are pulled in from system environment variables, which is a helpful way to access sensitive values (like API keys). This prevents us from accidentally checking them in to source control.</p>
<p>Now, we need our Authy production key (<a href="https://dashboard.authy.com/signup">sign up for Authy here</a>). When you create an Authy application, the production key is found on the dashboard:</p>
<p><img src="//s3.amazonaws.com/howtodocs/2fa-authy-dashboard.png" alt="Authy Dashboard"></p>
<p>Next, we need to jump over to the <code>UserController</code> to configure the Authy client and create an instance method to send a one-time password.</p>
</div><div data-title="Sending a Token on Account Creation" data-file="app/controllers/users_controller.rb" data-highlight="24-27" class="step"><h2 id="sending-a-token-on-account-creation">Sending a Token on Account Creation</h2>
<p>Once the user has an <code>authyId</code>, we can actually send a verification code to that user&#39;s mobile phone. </p>
<p>When our user is created successfully via the form we implemented for the last story, we send a token to the user&#39;s mobile phone to verify their account in our controller.  When the code is sent, we redirect to another page where the user can enter the token they were sent, completing the verification process.</p>
<p>Let&#39;s check out the code for that next!</p>
</div></div><div data-title="Verify the Code" class="chapter"><div data-title="Verify the One-Time Password" data-file="app/views/users/show_verify.html.erb" data-language="htmlembedded" class="step"><h2>User Story: Verify the One-Time Password</h2><blockquote>As a user, I want to enter the one-time password sent to my mobile phone from the authentication system before I complete the signup process.</blockquote></blockquote><p>This story covers the next user-facing step of the verification process, where they enter the code we sent them to verify their possession of the phone number they gave us. Here&#39;s what needs to get done to complete this story:</p>
<ul>
<li>Create a form to allow the user to enter the one-time password they were sent</li>
<li>Create routes and controllers to both display the form and handle the submission of the one-time password</li>
</ul>
<p>The route definition in <code>config/routes.rb</code> is pretty straight-forward, so we&#39;ll skip that bit here. Let&#39;s begin instead with the verification form, which is created with the Jade code you see here.</p>
</div><div data-title="The Verification Form" data-file="app/views/users/show_verify.html.erb" data-highlight="7-13" data-language="htmlembedded" class="step"><h2 id="the-verification-form">The Verification Form</h2>
<p>This page actually has two forms, but we&#39;ll focus on the first one first. It has only a single field for the verification code, which we&#39;ll submit to the server for validation.</p>
</div><div data-title="Verifying the Code: Controller" data-file="app/controllers/users_controller.rb" data-highlight="37-56" class="step"><h2 id="verifying-the-code-controller">Verifying the Code: Controller</h2>
<p>This controller function handles the form submission. It needs to:</p>
<ul>
<li>Get the current user </li>
<li>Verify the code that was entered by the user</li>
<li>If the code entered was valid, flip a boolean flag on the user model to indicate the account was verified</li>
</ul>
<h2 id="verifying-the-code">Verifying the Code</h2>
<p>Authy provides us with a <code>verify</code> method that allows us to pass a user id, a token and a callback function if we&#39;d like. In this case we just need to check that the API request was successful and if so set <code>user.verified</code> to true. </p>
<p>That&#39;s all for this story! However, our verification form wouldn&#39;t be very usable if there wasn&#39;t a way to resend a verification code if the message didn&#39;t arrive at the end user&#39;s handset for whatever reason.</p>
</div><div data-title="Re-sending The Code" data-file="app/controllers/users_controller.rb" data-highlight="58-63" class="step"><h2 id="re-sending-the-code">Re-sending the Code</h2>
<p>Since the form for re-sending the code is one line (see <code>show_verify.html.erb</code>) we&#39;re going to skip that for this tutorial. Let&#39;s just look at the controller function.</p>
<p>This controller loads the <code>User</code> model associated with the request and then uses the same Authy API method we used earlier to resend the code. Pretty straightforward!</p>
<p>To wrap things up, let&#39;s implement our last user story where we confirm for the user that their account has been verified with a text message and a success page.</p>
</div></div><div data-title="Confirm Account Creation" class="chapter"><div data-title="Confirm Account Creation" data-file="app/views/users/show.html.erb" data-language="htmlembedded" class="step"><h2>User Story: Confirm Account Creation</h2><blockquote>As a user, I want to view a success page and receive a text message indicating that my account has been created successfully.</blockquote><p>This story completes the account verification use case by indicating to the user that their account has been created and verified successfully. To implement this story, we need to:</p>
<ul>
<li>Display a page that indicates that the user account has been created and verified successfully</li>
<li>Send a text message to the user&#39;s phone indicating their account has been verified</li>
</ul>
<p>Let&#39;s begin by looking at the view that shows a user&#39;s account details.</p>
</div><div data-title="Show User Details Page" data-file="app/views/users/show.html.erb" data-language="htmlembedded" class="step"><h2 id="show-user-details-page">Show User Details Page</h2>
<p>This simple .erb template displays a user name and let&#39;s them know they&#39;ve been verified.</p>
<p>Just a reminder that our router is automatically looking for a &#39;show.html.erb&#39; template to render since we told it to use Resource Routing which automatically creates a <code>users/show/:id</code> route.</p>
<p>This should suffice for confirmation in the browser that the user has been verified. Let&#39;s see how we might send that text message next.</p>
</div><div data-title="Configuring Twilio" data-file="Gemfile" data-language="ruby" data-highlight="29-33" class="step"><h2 id="configuring-twilio">Configuring Twilio</h2>
<p>Authy is awesome for abstracting SMS and handling 2FA and account verification, but we can&#39;t use it to send arbitrary text messages. Let&#39;s use the <a href="/docs/api/rest/sending-sms">Twilio API</a> directly to do that!</p>
<p>In order to use the &#39;twilio-ruby&#39; helper library we just need to include it in our Gemfile.</p>
<p>But first, we need to configure our Twilio account. We&#39;ll need three things:</p>
<ul>
<li>Our Twilio account SID</li>
<li>Our Twilio auth token</li>
<li>A Twilio number in our account that can send text messages</li>
</ul>
<p>Once we&#39;ve hunted these config variables down we can create an instance function to send a message to the user&#39;s phone.</p>
</div><div data-title="Sending a Message: Creating a Twilio Client" data-file="app/controllers/users_controller.rb" data-highlight="67-77" class="step"><h2 id="sending-a-message-using-the-twilio-client">Sending a Message: Using the Twilio Client</h2>
<p>Much as we did for our Authy client, we create a single instance of the Twilio REST API helper, called <code>@client</code> in this example.</p>
<p>Then all we need to do to send an sms is use the built in <code>messages.create()</code> to send an SMS to the user&#39;s phone. Notice we are combing <code>country_code</code> and <code>phone_number</code> to make sure we support international numbers.</p>
<p>Let&#39;s finish up in the controller, where we actually use this functionality.</p>
</div><div data-title="Sending a Message: Updating the Controller" data-file="app/controllers/users_controller.rb" data-highlight="47-48" class="step"><h2 id="sending-a-message-updating-the-controller">Sending a Message: Updating the Controller</h2>
<p>In the controller, after a new user has been successfully verified, we use <code>send_message</code> to deliver them the happy news! </p>
<h2 id="all-done">All Done</h2>
<p>And with that, we&#39;ve implemented account verification in our Ruby on Rails application! Be sure to check out the project buttons above to download the source for this application, view it on GitHub, or deploy it to Heroku to see it in action for yourself.</p>
<p>We&#39;d also love to hear your feedback on this tutorial - <a href="mailto:help@twilio.com">please reach out to us</a> with any questions you might have.  Thanks for checking out the tutorial!</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="app/models/user.rb" data-mode="ruby">Y2xhc3MgVXNlciA8IEFjdGl2ZVJlY29yZDo6QmFzZQogIGhhc19zZWN1cmVfcGFzc3dvcmQKCiAgdmFsaWRhdGVzIDplbWFpbCwgIHByZXNlbmNlOiB0cnVlLCBmb3JtYXQ6IHsgd2l0aDogL1xBLitALiskXFovIH0sIHVuaXF1ZW5lc3M6IHRydWUKICB2YWxpZGF0ZXMgOm5hbWUsIHByZXNlbmNlOiB0cnVlCiAgdmFsaWRhdGVzIDpjb3VudHJ5X2NvZGUsIHByZXNlbmNlOiB0cnVlCiAgdmFsaWRhdGVzIDpwaG9uZV9udW1iZXIsIHByZXNlbmNlOiB0cnVlCmVuZAo=</textarea>
<textarea class="saurus-file" data-file="config/routes.rb" data-mode="ruby">UmFpbHMuYXBwbGljYXRpb24ucm91dGVzLmRyYXcgZG8KCiAgZ2V0ICJ1c2Vycy92ZXJpZnkiLCB0bzogJ3VzZXJzI3Nob3dfdmVyaWZ5JywgYXM6ICd2ZXJpZnknCiAgcG9zdCAidXNlcnMvdmVyaWZ5IgogIHBvc3QgInVzZXJzL3Jlc2VuZCIKCiAgIyBDcmVhdGUgdXNlcnMKICByZXNvdXJjZXMgOnVzZXJzLCBvbmx5OiBbOm5ldywgOmNyZWF0ZSwgOnNob3ddCgogICMgSG9tZSBwYWdlCiAgcm9vdCAnbWFpbiNpbmRleCcKCmVuZA==</textarea>
<textarea class="saurus-file" data-file="app/views/users/new.html.erb" data-mode="html_ruby">PGgxPldlJ3JlIGdvaW5nIHRvIGJlICpCRVNUKiBmcmllbmRzPC9oMT4KPHA+IFRoYW5rcyBmb3IgeW91ciBpbnRlcmVzdCBpbiBzaWduaW5nIHVwISBDYW4geW91IHRlbGwgdXMgYSBiaXQgYWJvdXQgeW91cnNlbGY/PC9wPgoKPCUgaWYgQHVzZXIuZXJyb3JzLmFueT8gJT4KICA8aDI+T29wcywgc29tZXRoaW5nIHdlbnQgd3JvbmchPC9oMj4KCiAgPHVsPgogICAgPCUgQHVzZXIuZXJyb3JzLmZ1bGxfbWVzc2FnZXMuZWFjaCBkbyB8ZXJyb3J8ICU+CiAgICAgIDxsaT48JT0gZXJyb3IgJT48L2xpPgogICAgPCUgZW5kIC0lPgogIDwvdWw+CjwlIGVuZCAtJT4KCjwlPSBmb3JtX2ZvciBAdXNlciBkbyB8ZnwgJT4KICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgIDwlPSBmLmxhYmVsIDpuYW1lLCAiVGVsbCB1cyB5b3VyIG5hbWU6IiAlPgogICAgPCU9IGYudGV4dF9maWVsZCA6bmFtZSwgY2xhc3M6ICJmb3JtLWNvbnRyb2wiLCBwbGFjZWhvbGRlcjogIlppbmdlbGJlcnQgQmVtYmxlZGFjayIgJT4KICA8L2Rpdj4KICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgIDwlPSBmLmxhYmVsIDplbWFpbCwgIkVudGVyIFlvdXIgRS1tYWlsIEFkZHJlc3M6IiAlPgogICAgPCU9IGYuZW1haWxfZmllbGQgOmVtYWlsLCBjbGFzczogImZvcm0tY29udHJvbCIsIHBsYWNlaG9sZGVyOiAibWVAbXlkb21haW4uY29tIiAlPgogIDwvZGl2PgogIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgPCU9IGYubGFiZWwgOnBhc3N3b3JkLCAiRW50ZXIgYSBwYXNzd29yZDoiICU+CiAgICA8JT0gZi5wYXNzd29yZF9maWVsZCA6cGFzc3dvcmQsIGNsYXNzOiAiZm9ybS1jb250cm9sIiAlPgogIDwvZGl2PgogIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgPCU9IGYubGFiZWwgOmNvdW50cnlfY29kZSAlPgogICAgPCU9IGYudGV4dF9maWVsZCA6Y291bnRyeV9jb2RlLCBjbGFzczogImZvcm0tY29udHJvbCIsIGlkOiAiYXV0aHktY291bnRyaWVzIiAlPgogIDwvZGl2PgogIDxkaXYgY2xhc3M9ImZvcm0tZ3JvdXAiPgogICAgPCU9IGYubGFiZWwgOnBob25lX251bWJlciAlPgogICAgPCU9IGYudGV4dF9maWVsZCA6cGhvbmVfbnVtYmVyLCBjbGFzczogImZvcm0tY29udHJvbCIsIGlkOiAiYXV0aHktY2VsbHBob25lIiAlPgogIDwvZGl2PgogIDxidXR0b24gY2xhc3M9ImJ0biBidG4tcHJpbWFyeSI+U2lnbiB1cDwvYnV0dG9uPgo8JSBlbmQgLSU+Cg==</textarea>
<textarea class="saurus-file" data-file="app/controllers/users_controller.rb" data-mode="ruby">Y2xhc3MgVXNlcnNDb250cm9sbGVyIDwgQXBwbGljYXRpb25Db250cm9sbGVyCiAgZGVmIG5ldwogICAgQHVzZXIgPSBVc2VyLm5ldwogIGVuZAoKICBkZWYgc2hvdwogICAgQHVzZXIgPSBjdXJyZW50X3VzZXIKICBlbmQKCiAgZGVmIGNyZWF0ZQogICAgQHVzZXIgPSBVc2VyLm5ldyh1c2VyX3BhcmFtcykKICAgIGlmIEB1c2VyLnNhdmUKICAgICAgIyBTYXZlIHRoZSB1c2VyX2lkIHRvIHRoZSBzZXNzaW9uIG9iamVjdAogICAgICBzZXNzaW9uWzp1c2VyX2lkXSA9IEB1c2VyLmlkCgogICAgICAjIENyZWF0ZSB1c2VyIG9uIEF1dGh5LCB3aWxsIHJldHVybiBhbiBpZCBvbiB0aGUgb2JqZWN0CiAgICAgIGF1dGh5ID0gQXV0aHk6OkFQSS5yZWdpc3Rlcl91c2VyKAogICAgICAgIGVtYWlsOiBAdXNlci5lbWFpbCwKICAgICAgICBjZWxscGhvbmU6IEB1c2VyLnBob25lX251bWJlciwKICAgICAgICBjb3VudHJ5X2NvZGU6IEB1c2VyLmNvdW50cnlfY29kZQogICAgICApCiAgICAgIEB1c2VyLnVwZGF0ZShhdXRoeV9pZDogYXV0aHkuaWQpCgogICAgICAjIFNlbmQgYW4gU01TIHRvIHlvdXIgdXNlcgogICAgICBBdXRoeTo6QVBJLnJlcXVlc3Rfc21zKGlkOiBAdXNlci5hdXRoeV9pZCkKCiAgICAgIHJlZGlyZWN0X3RvIHZlcmlmeV9wYXRoCiAgICBlbHNlCiAgICAgIHJlbmRlciA6bmV3CiAgICBlbmQKICBlbmQKCiAgZGVmIHNob3dfdmVyaWZ5CiAgICByZXR1cm4gcmVkaXJlY3RfdG8gbmV3X3VzZXJfcGF0aCB1bmxlc3Mgc2Vzc2lvbls6dXNlcl9pZF0KICBlbmQKCiAgZGVmIHZlcmlmeQogICAgQHVzZXIgPSBjdXJyZW50X3VzZXIKCiAgICAjIFVzZSBBdXRoeSB0byBzZW5kIHRoZSB2ZXJpZmljYXRpb24gdG9rZW4KICAgIHRva2VuID0gQXV0aHk6OkFQSS52ZXJpZnkoaWQ6IEB1c2VyLmF1dGh5X2lkLCB0b2tlbjogcGFyYW1zWzp0b2tlbl0pCgogICAgaWYgdG9rZW4ub2s/CiAgICAgICMgTWFyayB0aGUgdXNlciBhcyB2ZXJpZmllZCBmb3IgZ2V0IC91c2VyLzppZAogICAgICBAdXNlci51cGRhdGUodmVyaWZpZWQ6IHRydWUpCgogICAgICAjIFNlbmQgYW4gU01TIHRvIHRoZSB1c2VyICdzdWNjZXNzJwogICAgICBzZW5kX21lc3NhZ2UoIllvdSBkaWQgaXQhIFNpZ251cCBjb21wbGV0ZSA6KSIpCgogICAgICAjIFNob3cgdGhlIHVzZXIgcHJvZmlsZQogICAgICByZWRpcmVjdF90byB1c2VyX3BhdGgoQHVzZXIuaWQpCiAgICBlbHNlCiAgICAgIGZsYXNoLm5vd1s6ZGFuZ2VyXSA9ICJJbmNvcnJlY3QgY29kZSwgcGxlYXNlIHRyeSBhZ2FpbiIKICAgICAgcmVuZGVyIDpzaG93X3ZlcmlmeQogICAgZW5kCiAgZW5kCgogIGRlZiByZXNlbmQKICAgIEB1c2VyID0gY3VycmVudF91c2VyCiAgICBBdXRoeTo6QVBJLnJlcXVlc3Rfc21zKGlkOiBAdXNlci5hdXRoeV9pZCkKICAgIGZsYXNoWzpub3RpY2VdID0gIlZlcmlmaWNhdGlvbiBjb2RlIHJlLXNlbnQiCiAgICByZWRpcmVjdF90byB2ZXJpZnlfcGF0aAogIGVuZAogIAogIHByaXZhdGUKCiAgZGVmIHNlbmRfbWVzc2FnZShtZXNzYWdlKQogICAgQHVzZXIgPSBjdXJyZW50X3VzZXIKICAgIHR3aWxpb19udW1iZXIgPSBFTlZbJ1RXSUxJT19OVU1CRVInXQogICAgQGNsaWVudCA9IFR3aWxpbzo6UkVTVDo6Q2xpZW50Lm5ldyBFTlZbJ1RXSUxJT19BQ0NPVU5UX1NJRCddLCBFTlZbJ1RXSUxJT19BVVRIX1RPS0VOJ10KICAgIG1lc3NhZ2UgPSBAY2xpZW50LmFjY291bnQubWVzc2FnZXMuY3JlYXRlKAogICAgICA6ZnJvbSA9PiB0d2lsaW9fbnVtYmVyLAogICAgICA6dG8gPT4gQHVzZXIuY291bnRyeV9jb2RlK0B1c2VyLnBob25lX251bWJlciwKICAgICAgOmJvZHkgPT4gbWVzc2FnZQogICAgKQogICAgcHV0cyBtZXNzYWdlLnRvCiAgZW5kCgogIGRlZiB1c2VyX3BhcmFtcwogICAgcGFyYW1zLnJlcXVpcmUoOnVzZXIpLnBlcm1pdCgKICAgICAgOmVtYWlsLCA6cGFzc3dvcmQsIDpuYW1lLCA6Y291bnRyeV9jb2RlLCA6cGhvbmVfbnVtYmVyCiAgICApCiAgZW5kCgplbmQK</textarea>
<textarea class="saurus-file" data-file="config/secrets.yml" data-mode="yaml">IyBCZSBzdXJlIHRvIHJlc3RhcnQgeW91ciBzZXJ2ZXIgd2hlbiB5b3UgbW9kaWZ5IHRoaXMgZmlsZS4KCiMgWW91ciBzZWNyZXQga2V5IGlzIHVzZWQgZm9yIHZlcmlmeWluZyB0aGUgaW50ZWdyaXR5IG9mIHNpZ25lZCBjb29raWVzLgojIElmIHlvdSBjaGFuZ2UgdGhpcyBrZXksIGFsbCBvbGQgc2lnbmVkIGNvb2tpZXMgd2lsbCBiZWNvbWUgaW52YWxpZCEKCiMgTWFrZSBzdXJlIHRoZSBzZWNyZXQgaXMgYXQgbGVhc3QgMzAgY2hhcmFjdGVycyBhbmQgYWxsIHJhbmRvbSwKIyBubyByZWd1bGFyIHdvcmRzIG9yIHlvdSdsbCBiZSBleHBvc2VkIHRvIGRpY3Rpb25hcnkgYXR0YWNrcy4KIyBZb3UgY2FuIHVzZSBgcmFrZSBzZWNyZXRgIHRvIGdlbmVyYXRlIGEgc2VjdXJlIHNlY3JldCBrZXkuCgojIE1ha2Ugc3VyZSB0aGUgc2VjcmV0cyBpbiB0aGlzIGZpbGUgYXJlIGtlcHQgcHJpdmF0ZQojIGlmIHlvdSdyZSBzaGFyaW5nIHlvdXIgY29kZSBwdWJsaWNseS4KCmRldmVsb3BtZW50OgogIHNlY3JldF9rZXlfYmFzZTogMjk5NWNkMjAwYTQ3NTA4MjA3MGQ1YWQ3YjExYzY5NDA3YTYyMTliMGI5YmYxZjc0N2Y2MjIzNDcwOTUwNmMwOTdkYTE5ZjczMWVjZjEyNWEzZmI1MzY5NGVlMTAzNzk4ZDY5NjJjMTk5NjAzYjkyYmU4ZjA4YjAwYmY2ZGJiMTgKICBhdXRoeV9rZXk6IDwlPSBFTlZbIkFVVEhZX0FQSV9LRVkiXSAlPgoKdGVzdDoKICBzZWNyZXRfa2V5X2Jhc2U6IGRlZmYyNGJhYjA1OWJiY2NlZWVlOThhZmFjOGRmMDQ4MTRjNDRkZDg3ZDMwODQxZjhkYjUzMmE4MTViNjQzODdkNjljZmQzZDA5YTc4NDE3ODY5YzQ4NDZmMTMzYmE3OTc4MDY4ODgyY2EwYTk2NjI2MTM2ZWJkMDg0YjcwNzMyCiAgYXV0aHlfa2V5OiA8JT0gRU5WWyJBVVRIWV9BUElfS0VZIl0gJT4KCiMgRG8gbm90IGtlZXAgcHJvZHVjdGlvbiBzZWNyZXRzIGluIHRoZSByZXBvc2l0b3J5LAojIGluc3RlYWQgcmVhZCB2YWx1ZXMgZnJvbSB0aGUgZW52aXJvbm1lbnQuCnByb2R1Y3Rpb246CiAgc2VjcmV0X2tleV9iYXNlOiA8JT0gRU5WWyJTRUNSRVRfS0VZX0JBU0UiXSAlPgogIGF1dGh5X2tleTogPCU9IEVOVlsiQVVUSFlfQVBJX0tFWSJdICU+Cg==</textarea>
<textarea class="saurus-file" data-file="app/views/users/show_verify.html.erb" data-mode="html_ruby">PGgxPkp1c3QgVG8gQmUgU2FmZS4uLjwvaDE+CjxwPgogICAgWW91ciBhY2NvdW50IGhhcyBiZWVuIGNyZWF0ZWQsIGJ1dCB3ZSBuZWVkIHRvIG1ha2Ugc3VyZSB5b3UncmUgYSBodW1hbgogICAgaW4gY29udHJvbCBvZiB0aGUgcGhvbmUgbnVtYmVyIHlvdSBnYXZlIHVzLiBDYW4geW91IHBsZWFzZSBlbnRlciB0aGUgCiAgICB2ZXJpZmljYXRpb24gY29kZSB3ZSBqdXN0IHNlbnQgdG8geW91ciBwaG9uZT8KPC9wPgo8JT0gZm9ybV90YWcgdXNlcnNfdmVyaWZ5X3BhdGggZG8gJT4KICA8ZGl2IGNsYXNzPSJmb3JtLWdyb3VwIj4KICAgIDwlPSBsYWJlbF90YWcgOmNvZGUsICJWZXJpZmljYXRpb24gQ29kZToiICU+CiAgICA8JT0gdGV4dF9maWVsZF90YWcgOnRva2VuLCAnJywgY2xhc3M6ICJmb3JtLWNvbnRyb2wiICU+CiAgPC9kaXY+CiAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidG4gYnRuLXByaW1hcnkiPlZlcmlmeSBUb2tlbjwvYnV0dG9uPgo8JSBlbmQgLSU+Cgo8aHI+CjwlPSBmb3JtX3RhZyB1c2Vyc19yZXNlbmRfcGF0aCBkbyAlPgogIDxidXR0b24gdHlwZT0ic3VibWl0IiBjbGFzcz0iYnRuIj5SZXNlbmQgY29kZTwvYnV0dG9uPgo8JSBlbmQgLSU+Cg==</textarea>
<textarea class="saurus-file" data-file="app/views/users/show.html.erb" data-mode="html_ruby">PGgxPjwlPSBAdXNlci5uYW1lICU+PC9oMT4KPHA+QWNjb3VudCBTdGF0dXM6IDwlIGlmIEB1c2VyLnZlcmlmaWVkPyAlPlZlcmlmaWVkPCUgZWxzZSAtJT5Ob3QgVmVyaWZpZWQ8JSBlbmQgLSU+CjwlIGlmICFAdXNlci52ZXJpZmllZD8gJT4KPHA+CiAgPCU9IGxpbmtfdG8gIlZlcmlmeSB5b3VyIGFjY291bnQgbm93LiIsIHZlcmlmeV9wYXRoICU+CjwvcD4KPCUgZW5kIC0lPg==</textarea>
<textarea class="saurus-file" data-file="Gemfile" data-mode="ruby">c291cmNlICdodHRwczovL3J1YnlnZW1zLm9yZycKCgojIEJ1bmRsZSBlZGdlIFJhaWxzIGluc3RlYWQ6IGdlbSAncmFpbHMnLCBnaXRodWI6ICdyYWlscy9yYWlscycKZ2VtICdyYWlscycsICc0LjIuMCcKIyBVc2UgcG9zdGdyZXNxbCBhcyB0aGUgZGF0YWJhc2UgZm9yIEFjdGl2ZSBSZWNvcmQKZ2VtICdwZycKIyBVc2UgU0NTUyBmb3Igc3R5bGVzaGVldHMKZ2VtICdzYXNzLXJhaWxzJywgJ34+IDUuMCcKIyBVc2UgVWdsaWZpZXIgYXMgY29tcHJlc3NvciBmb3IgSmF2YVNjcmlwdCBhc3NldHMKZ2VtICd1Z2xpZmllcicsICc+PSAxLjMuMCcKIyBVc2UgQ29mZmVlU2NyaXB0IGZvciAuY29mZmVlIGFzc2V0cyBhbmQgdmlld3MKZ2VtICdjb2ZmZWUtcmFpbHMnLCAnfj4gNC4xLjAnCiMgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9zc3RlcGhlbnNvbi9leGVjanMjcmVhZG1lIGZvciBtb3JlIHN1cHBvcnRlZCBydW50aW1lcwojIGdlbSAndGhlcnVieXJhY2VyJywgcGxhdGZvcm1zOiA6cnVieQoKIyBVc2UganF1ZXJ5IGFzIHRoZSBKYXZhU2NyaXB0IGxpYnJhcnkKZ2VtICdqcXVlcnktcmFpbHMnCiMgVHVyYm9saW5rcyBtYWtlcyBmb2xsb3dpbmcgbGlua3MgaW4geW91ciB3ZWIgYXBwbGljYXRpb24gZmFzdGVyLiBSZWFkIG1vcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWlscy90dXJib2xpbmtzCmdlbSAndHVyYm9saW5rcycKIyBCdWlsZCBKU09OIEFQSXMgd2l0aCBlYXNlLiBSZWFkIG1vcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWlscy9qYnVpbGRlcgpnZW0gJ2pidWlsZGVyJywgJ34+IDIuMCcKIyBidW5kbGUgZXhlYyByYWtlIGRvYzpyYWlscyBnZW5lcmF0ZXMgdGhlIEFQSSB1bmRlciBkb2MvYXBpLgpnZW0gJ3Nkb2MnLCAnfj4gMC40LjAnLCBncm91cDogOmRvYwoKIyBVc2UgQWN0aXZlTW9kZWwgaGFzX3NlY3VyZV9wYXNzd29yZApnZW0gJ2JjcnlwdCcsICd+PiAzLjEuNycKCiMgVXNlIEF1dGh5IGZvciBzZW5kaW5nIHRva2VuCmdlbSAnYXV0aHknCgojIFVzZSBUd2lsaW8gdG8gc2VuZCBjb25maXJtYXRpb24gbWVzc2FnZQpnZW0gJ3R3aWxpby1ydWJ5JwoKIyBVc2UgVW5pY29ybiBhcyB0aGUgYXBwIHNlcnZlcgpnZW0gJ3VuaWNvcm4nCgpncm91cCA6cHJvZHVjdGlvbiBkbwogIGdlbSAncmFpbHNfMTJmYWN0b3InCmVuZAoKZ3JvdXAgOmRldmVsb3BtZW50LCA6dGVzdCBkbwogICMgQ2FsbCAnYnllYnVnJyBhbnl3aGVyZSBpbiB0aGUgY29kZSB0byBzdG9wIGV4ZWN1dGlvbiBhbmQgZ2V0IGEgZGVidWdnZXIgY29uc29sZQogIGdlbSAnYnllYnVnJwoKICAjIEFjY2VzcyBhbiBJUkIgY29uc29sZSBvbiBleGNlcHRpb24gcGFnZXMgb3IgYnkgdXNpbmcgPCU9IGNvbnNvbGUgJT4gaW4gdmlld3MKICBnZW0gJ3dlYi1jb25zb2xlJywgJ34+IDIuMCcKCiAgIyBTcHJpbmcgc3BlZWRzIHVwIGRldmVsb3BtZW50IGJ5IGtlZXBpbmcgeW91ciBhcHBsaWNhdGlvbiBydW5uaW5nIGluIHRoZSBiYWNrZ3JvdW5kLiBSZWFkIG1vcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9yYWlscy9zcHJpbmcKICBnZW0gJ3NwcmluZycKCiAgIyBNb2NoYSBmb3IgbW9ja2luZwogIGdlbSAnbW9jaGEnCmVuZAoK</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>